query GetPRsWithReviews($owner: String!, $name: String!, $limit: Int!, $afterCursor: String) {
  repository(owner: $owner, name: $name) {
    name
    pullRequests(first: $limit, orderBy: {field: UPDATED_AT, direction: DESC}, after: $afterCursor) {
      pageInfo {
        endCursor
        hasNextPage
      }
      nodes {
        number
        title
        url
        createdAt
        mergedAt
        closedAt
        author {
          login
        }
        reviews(first: 100) {
          pageInfo {
            endCursor
            hasNextPage
          }
          nodes {
            author {
              login
            }
            publishedAt
            state
          }
        }
        timelineItems(first: 100, itemTypes:[REVIEW_REQUESTED_EVENT]){
          pageInfo {
            endCursor
            hasNextPage
          }
          nodes{
            __typename
            ... on ReviewRequestedEvent{
              requestedReviewer{
                  __typename
                  ... on User{
                    login
                  }
                }
              createdAt
            }
          }
        }
      }
    }
  }
}
